<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <title>
            Jared Gatdula | Portfolio
        </title>
        <link rel="icon" href="fav.png">
        <link href="main.40f27e161ba829c32fbb.css" rel="stylesheet">
        <style>
            .profile__picture-img {
                height: 100%;
                max-height: 24rem;
                width: auto;
                max-width: 100%;
                border-radius: 50%;
                object-fit: cover;
                box-shadow: 0 0 0 8px rgba(26, 26, 26, 0.9);
            }
            .profile__picture--image {
                justify-content: center;
            }
        </style>
    </head>
    <body>
        <div class="hero" id="hero">
            <div class="canvas">
                <canvas class="connecting-dots">
                </canvas>
            </div>
            <div class="heading">
                <div class="heading__line-1" id="hero-line-1">
                </div>
                <div class="heading__line-2" id="hero-line-2">
                </div>
                <a href="#about" class="heading__link" id="hero-cta">
                    <div class="heading-cta">
                        <span id="hero-cta-text">
                        </span>
                        <svg class="heading__arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <title>
                                arrow-right
                            </title>
                            <path d="M11.293 5.707l5.293 5.293h-11.586c-0.552 0-1 0.448-1 1s0.448 1 1 1h11.586l-5.293 5.293c-0.391 0.391-0.391 1.024 0 1.414s1.024 0.391 1.414 0l7-7c0.092-0.092 0.166-0.202 0.217-0.324 0.101-0.245 0.101-0.521 0-0.766-0.049-0.118-0.121-0.228-0.217-0.324l-7-7c-0.391-0.391-1.024-0.391-1.414 0s-0.391 1.024 0 1.414z">
                            </path>
                        </svg>
                    </div>
                </a>
            </div>
        </div>
        <nav class="navigation-bar">
            <ul class="navigation" id="navigation">
            </ul>
        </nav>
        <div class="main-bg">
            <div class="canvas">
                <canvas class="canvas-2">
                </canvas>
            </div>
        </div>
        <section class="about" id="about">
            <h2 class="about__heading section-heading" id="about-heading">
            </h2>
            <div class="about__content">
                <div class="profile">
                    <div class="profile__picture">
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 482.9 482.9" style="enable-background:new 0 0 482.9 482.9" xml:space="preserve" height="100%" stroke="rgb(26, 26, 26)" stroke-width="16">
                            <g>
                                <path fill="url(#gradient-1)" d="M239.7,260.2c0.5,0,1,0,1.6,0c0.2,0,0.4,0,0.6,0c0.3,0,0.7,0,1,0c29.3-0.5,53-10.8,70.5-30.5
  			c38.5-43.4,32.1-117.8,31.4-124.9c-2.5-53.3-27.7-78.8-48.5-90.7C280.8,5.2,262.7,0.4,242.5,0h-0.7c-0.1,0-0.3,0-0.4,0h-0.6
  			c-11.1,0-32.9,1.8-53.8,13.7c-21,11.9-46.6,37.4-49.1,91.1c-0.7,7.1-7.1,81.5,31.4,124.9C186.7,249.4,210.4,259.7,239.7,260.2z
  			 M164.6,107.3c0-0.3,0.1-0.6,0.1-0.8c3.3-71.7,54.2-79.4,76-79.4h0.4c0.2,0,0.5,0,0.8,0c27,0.6,72.9,11.6,76,79.4
  			c0,0.3,0,0.6,0.1,0.8c0.1,0.7,7.1,68.7-24.7,104.5c-12.6,14.2-29.4,21.2-51.5,21.4c-0.2,0-0.3,0-0.5,0l0,0c-0.2,0-0.3,0-0.5,0
  			c-22-0.2-38.9-7.2-51.4-21.4C157.7,176.2,164.5,107.9,164.6,107.3z"/>
                                <path fill="url(#gradient-2)" d="M446.8,383.6c0-0.1,0-0.2,0-0.3c0-0.8-0.1-1.6-0.1-2.5c-0.6-19.8-1.9-66.1-45.3-80.9c-0.3-0.1-0.7-0.2-1-0.3
  			c-45.1-11.5-82.6-37.5-83-37.8c-6.1-4.3-14.5-2.8-18.8,3.3c-4.3,6.1-2.8,14.5,3.3,18.8c1.7,1.2,41.5,28.9,91.3,41.7
  			c23.3,8.3,25.9,33.2,26.6,56c0,0.9,0,1.7,0.1,2.5c0.1,9-0.5,22.9-2.1,30.9c-16.2,9.2-79.7,41-176.3,41
  			c-96.2,0-160.1-31.9-176.4-41.1c-1.6-8-2.3-21.9-2.1-30.9c0-0.8,0.1-1.6,0.1-2.5c0.7-22.8,3.3-47.7,26.6-56
  			c49.8-12.8,89.6-40.6,91.3-41.7c6.1-4.3,7.6-12.7,3.3-18.8c-4.3-6.1-12.7-7.6-18.8-3.3c-0.4,0.3-37.7,26.3-83,37.8
  			c-0.4,0.1-0.7,0.2-1,0.3c-43.4,14.9-44.7,61.2-45.3,80.9c0,0.9,0,1.7-0.1,2.5c0,0.1,0,0.2,0,0.3c-0.1,5.2-0.2,31.9,5.1,45.3
  			c1,2.6,2.8,4.8,5.2,6.3c3,2,74.9,47.8,195.2,47.8s192.2-45.9,195.2-47.8c2.3-1.5,4.2-3.7,5.2-6.3
  			C447,415.5,446.9,388.8,446.8,383.6z"/>
                            </g>
                            <defs>
                                <linearGradient id="gradient-1" x1="0" y1="0" x2="80%" y2="80%">
                                    <stop stop-color="rgb(81,162,233)" offset="0%"/>
                                    <stop stop-color="rgb(168,120,162)" offset="100%"/>
                                </linearGradient>
                                <linearGradient id="gradient-2" x1="20%" y1="20%" x2="100%" y2="100%">
                                    <stop stop-color="rgb(168,120,162)" offset="0%"/>
                                    <stop stop-color="rgb(255,77,90)" offset="100%"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <p class="profile__blurb" id="profile-blurb">
                    </p>
                </div>
                <div class="skills" id="skills">
                </div>
            </div>
        </section>
        <section class="projects" id="projects">
            <h2 class="projects__heading section-heading" id="projects-heading">
            </h2>
        </section>
        <section class="contact" id="contact">
            <h2 class="contact__heading section-heading" id="contact-heading">
            </h2>
            <p class="contact__text" id="contact-text">
            </p>
            <form class="contact__form" id="contact-form" method="POST">
                <div class="contact__form-error-submit">
                    <div class="form-error" id="contact-errors">
                    </div>
                    <button type="submit" class="contact__form-submit-2 project__live-2" id="form-submit">
                        Submit
                    </button>
                </div>
            </form>
        </section>
        <footer class="footer" id="footer">
            <a href="#hero" id="back-to-top">
                <div class="return-home">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 24 24">
                        <title>
                        </title>
                        <path fill="#fafafa" d="M17.707 10.293l-5-5c-0.391-0.391-1.024-0.391-1.414 0l-5 5c-0.391 0.391-0.391 1.024 0 1.414s1.024 0.391 1.414 0l4.293-4.293 4.293 4.293c0.391 0.391 1.024 0.391 1.414 0s0.391-1.024 0-1.414zM17.707 17.293l-5-5c-0.391-0.391-1.024-0.391-1.414 0l-5 5c-0.391 0.391-0.391 1.024 0 1.414s1.024 0.391 1.414 0l4.293-4.293 4.293 4.293c0.391 0.391 1.024 0.391 1.414 0s0.391-1.024 0-1.414z">
                        </path>
                    </svg>
                </div>
            </a>
            <div class="socials" id="socials">
            </div>
            <p class="copyright" id="footer-copy">
            
            </p>
        </footer>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                loadPortfolioData('./yes.xml');
            });

            let scrollSpyHandler = null;
            let scrollSpyResizeHandler = null;

            async function loadPortfolioData(url) {
                try {
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`Request failed with status ${response.status}`);
                    }
                    const xmlText = await response.text();
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(xmlText, 'application/xml');
                    const parserError = xmlDoc.querySelector('parsererror');
                    if (parserError) {
                        throw new Error(parserError.textContent);
                    }
                    renderPortfolio(xmlDoc);
                } catch (error) {
                    console.error('Failed to load portfolio data:', error);
                }
            }

            function renderPortfolio(xmlDoc) {
                renderHero(xmlDoc);
                renderNavigation(xmlDoc);
                renderAbout(xmlDoc);
                renderProjects(xmlDoc);
                renderContact(xmlDoc);
                renderFooter(xmlDoc);
                updateDocumentTitle(xmlDoc);
                refreshScrollSpy();
            }

            function renderHero(xmlDoc) {
                const heroNode = xmlDoc.querySelector('hero');
                if (!heroNode) {
                    return;
                }
                const headlineLines = heroNode.querySelectorAll('headline > line');
                const lineOneEl = document.getElementById('hero-line-1');
                const lineTwoEl = document.getElementById('hero-line-2');
                if (lineOneEl) {
                    setLineContent(lineOneEl, headlineLines[0]);
                }
                if (lineTwoEl) {
                    setLineContent(lineTwoEl, headlineLines[1]);
                }
                const ctaNode = heroNode.querySelector('cta');
                const ctaLink = document.getElementById('hero-cta');
                const ctaText = document.getElementById('hero-cta-text');
                if (ctaNode && ctaLink) {
                    const href = ctaNode.getAttribute('href') || '#';
                    ctaLink.setAttribute('href', href);
                }
                if (ctaNode && ctaText) {
                    ctaText.textContent = normalizeText(ctaNode.textContent);
                }
            }

            function setLineContent(target, lineNode) {
                if (!target || !lineNode) {
                    return;
                }
                target.innerHTML = '';
                lineNode.childNodes.forEach((child) => {
                    if (child.nodeType === Node.TEXT_NODE) {
                        target.appendChild(document.createTextNode(child.nodeValue));
                    } else if (child.nodeType === Node.ELEMENT_NODE) {
                        if (child.nodeName.toLowerCase() === 'highlight') {
                            const span = document.createElement('span');
                            span.textContent = normalizeText(child.textContent);
                            target.appendChild(span);
                        } else {
                            target.appendChild(document.createTextNode(normalizeText(child.textContent)));
                        }
                    }
                });
            }

            function renderNavigation(xmlDoc) {
                const navEl = document.getElementById('navigation');
                if (!navEl) {
                    return;
                }
                navEl.innerHTML = '';
                const navLinks = xmlDoc.querySelectorAll('navigation > nav-link');
                const navItems = [];
                navLinks.forEach((linkNode) => {
                    const li = document.createElement('li');
                    li.className = 'navigation__item';
                    const state = (linkNode.getAttribute('state') || '').toLowerCase();
                    const targetAttr = linkNode.getAttribute('target') || '#';
                    const normalizedTarget = targetAttr.startsWith('#') ? targetAttr : `#${targetAttr}`;
                    if (state === 'active') {
                        li.classList.add('navigation__item--active');
                    }
                    const anchor = document.createElement('a');
                    anchor.href = normalizedTarget;
                    anchor.dataset.target = normalizedTarget.replace(/^#/, '');
                    anchor.textContent = normalizeText(linkNode.textContent);
                    li.appendChild(anchor);
                    navEl.appendChild(li);
                    navItems.push({
                        li,
                        targetId: normalizedTarget
                    });
                });
                setupScrollSpy(navItems);
            }

            function renderAbout(xmlDoc) {
                const aboutNode = xmlDoc.querySelector('main > section[id="about"]');
                if (!aboutNode) {
                    return;
                }
                const headingEl = document.getElementById('about-heading');
                const headingNode = aboutNode.querySelector('heading');
                if (headingEl && headingNode) {
                    headingEl.textContent = normalizeText(headingNode.textContent);
                }
                const pictureWrapper = document.querySelector('.profile__picture');
                const avatarNode = aboutNode.querySelector('profile > avatar');
                if (pictureWrapper && avatarNode) {
                    const asset = avatarNode.getAttribute('src');
                    if (asset) {
                        pictureWrapper.innerHTML = '';
                        const img = document.createElement('img');
                        img.className = 'profile__picture-img';
                        img.src = asset;
                        const altSource = normalizeText(avatarNode.getAttribute('alt'));
                        const heroHighlight = xmlDoc.querySelector('hero highlight');
                        const defaultAlt = heroHighlight ? `Portrait of ${normalizeText(heroHighlight.textContent)}` : 'Profile photo';
                        img.alt = altSource || defaultAlt;
                        const heightAttr = avatarNode.getAttribute('height');
                        if (heightAttr) {
                            img.style.height = heightAttr;
                        }
                        const widthAttr = avatarNode.getAttribute('width');
                        if (widthAttr) {
                            img.style.width = widthAttr;
                        }
                        pictureWrapper.appendChild(img);
                        pictureWrapper.classList.add('profile__picture--image');
                    } else {
                        pictureWrapper.classList.remove('profile__picture--image');
                    }
                }
                const blurbEl = document.getElementById('profile-blurb');
                const blurbNode = aboutNode.querySelector('profile > blurb');
                if (blurbEl && blurbNode) {
                    blurbEl.textContent = normalizeText(blurbNode.textContent);
                }
                const skillsContainer = document.getElementById('skills');
                const skillsNode = aboutNode.querySelector('skills');
                if (skillsContainer) {
                    skillsContainer.innerHTML = '';
                    if (skillsNode) {
                        skillsNode.querySelectorAll('column').forEach((columnNode) => {
                            const row = document.createElement('div');
                            row.className = 'skills__row';
                            columnNode.querySelectorAll('skill').forEach((skillNode) => {
                                const item = document.createElement('div');
                                const name = skillNode.getAttribute('name') || '';
                                const asset = skillNode.getAttribute('asset') || '';
                                const modifier = slugify(name);
                                item.className = `skills__item${modifier ? ` skills__item--${modifier}` : ''}`;
                                const img = document.createElement('img');
                                if (asset) {
                                    img.src = asset;
                                }
                                img.alt = name;
                                item.appendChild(img);
                                const label = document.createElement('div');
                                label.className = 'skills__item-name';
                                label.textContent = name;
                                item.appendChild(label);
                                row.appendChild(item);
                            });
                            skillsContainer.appendChild(row);
                        });
                    }
                    setupSkillAnimations(skillsContainer);
                }
            }

            function setupSkillAnimations(container) {
                if (!container) {
                    return;
                }
                const skillItems = container.querySelectorAll('.skills__item');
                if (!skillItems.length) {
                    return;
                }
                const reveal = (item) => {
                    item.classList.add('skills__item-fade-in');
                };
                if ('IntersectionObserver' in window) {
                    const observer = new IntersectionObserver(
                        (entries, obs) => {
                            entries.forEach((entry) => {
                                if (entry.isIntersecting) {
                                    reveal(entry.target);
                                    obs.unobserve(entry.target);
                                }
                            });
                        },
                        { threshold: 0.2 }
                    );
                    skillItems.forEach((item, index) => {
                        item.style.transitionDelay = `${index * 80}ms`;
                        observer.observe(item);
                    });
                } else {
                    skillItems.forEach(reveal);
                }
            }

            function renderProjects(xmlDoc) {
                const projectsNode = xmlDoc.querySelector('main > section[id="projects"]');
                const projectsSection = document.getElementById('projects');
                const headingEl = document.getElementById('projects-heading');
                if (projectsNode && headingEl) {
                    const headingNode = projectsNode.querySelector('heading');
                    if (headingNode) {
                        headingEl.textContent = normalizeText(headingNode.textContent);
                    }
                }
                if (!projectsNode || !projectsSection) {
                    return;
                }
                projectsSection.querySelectorAll('.project').forEach((project) => project.remove());
                const fragment = document.createDocumentFragment();
                projectsNode.querySelectorAll('project-list > project').forEach((projectNode) => {
                    const orientation = (projectNode.getAttribute('orientation') || 'image-left').toLowerCase();
                    const projectEl = document.createElement('div');
                    projectEl.className = `project ${orientation === 'image-right' ? 'project-right' : 'project-left'}`;
                    const detailsNode = projectNode.querySelector('details');
                    const infoEl = createProjectInfo(detailsNode);
                    const previewEl = createProjectPreview(projectNode, detailsNode);
                    if (orientation === 'image-right') {
                        projectEl.appendChild(infoEl);
                        projectEl.appendChild(previewEl);
                    } else {
                        projectEl.appendChild(previewEl);
                        projectEl.appendChild(infoEl);
                    }
                    fragment.appendChild(projectEl);
                });
                projectsSection.appendChild(fragment);
            }

            function createProjectInfo(detailsNode) {
                const infoEl = document.createElement('div');
                infoEl.className = 'project__info';
                if (!detailsNode) {
                    return infoEl;
                }
                const titleNode = detailsNode.querySelector('title');
                if (titleNode) {
                    const titleEl = document.createElement('h3');
                    titleEl.className = 'project__title';
                    titleEl.textContent = normalizeText(titleNode.textContent);
                    infoEl.appendChild(titleEl);
                }
                const descriptionNode = detailsNode.querySelector('description');
                if (descriptionNode) {
                    const descriptionEl = document.createElement('p');
                    descriptionEl.className = 'project__description';
                    descriptionEl.textContent = normalizeText(descriptionNode.textContent);
                    infoEl.appendChild(descriptionEl);
                }
                const linkGroup = detailsNode.querySelector('link-group');
                if (linkGroup) {
                    linkGroup.querySelectorAll('link').forEach((linkNode) => {
                        const anchor = document.createElement('a');
                        anchor.href = linkNode.getAttribute('href') || '#';
                        anchor.target = '_blank';
                        anchor.rel = 'noreferrer noopener';
                        const intent = linkNode.getAttribute('intent');
                        if (intent) {
                            anchor.dataset.intent = intent;
                        }
                        const button = document.createElement('div');
                        button.className = 'project__live-2';
                        button.textContent = normalizeText(linkNode.textContent);
                        anchor.appendChild(button);
                        infoEl.appendChild(anchor);
                    });
                }
                return infoEl;
            }

            function createProjectPreview(projectNode, detailsNode) {
                const previewNode = projectNode.querySelector('preview');
                const previewContainer = document.createElement('div');
                previewContainer.className = 'xml-project-preview';
                const imageWrapper = document.createElement('div');
                imageWrapper.className = 'xml-project-preview__image';
                const img = document.createElement('img');
                if (previewNode && previewNode.getAttribute('src')) {
                    img.src = previewNode.getAttribute('src');
                }
                const titleNode = detailsNode ? detailsNode.querySelector('title') : null;
                img.alt = titleNode ? `${normalizeText(titleNode.textContent)} preview` : 'Project preview';
                imageWrapper.appendChild(img);
                previewContainer.appendChild(imageWrapper);
                const previewLink = previewNode ? previewNode.getAttribute('href') : null;
                if (previewLink) {
                    const anchor = document.createElement('a');
                    anchor.href = previewLink;
                    anchor.target = '_blank';
                    anchor.rel = 'noreferrer noopener';
                    anchor.className = 'xml-project-preview__link';
                    anchor.appendChild(previewContainer);
                    return anchor;
                }
                return previewContainer;
            }

            function renderContact(xmlDoc) {
                const contactNode = xmlDoc.querySelector('footer > contact-section');
                if (!contactNode) {
                    return;
                }
                const headingEl = document.getElementById('contact-heading');
                const contactHeading = contactNode.querySelector('heading');
                if (headingEl && contactHeading) {
                    headingEl.textContent = normalizeText(contactHeading.textContent);
                }
                const textEl = document.getElementById('contact-text');
                const supportText = contactNode.querySelector('support-text');
                if (textEl && supportText) {
                    textEl.textContent = normalizeText(supportText.textContent);
                }
                const formEl = document.getElementById('contact-form');
                const errorsContainer = document.getElementById('contact-errors');
                if (formEl) {
                    const formNode = contactNode.querySelector('form');
                    if (formNode) {
                        const action = formNode.getAttribute('action');
                        const method = formNode.getAttribute('method');
                        if (action) {
                            formEl.setAttribute('action', action);
                        }
                        formEl.setAttribute('method', method || 'POST');
                        const submitGroup = formEl.querySelector('.contact__form-error-submit');
                        if (submitGroup) {
                            formEl.querySelectorAll('.contact__form-name, .contact__form-email, .contact__form-message, .contact__form-input').forEach((field) => field.remove());
                            formNode.querySelectorAll('field').forEach((fieldNode) => {
                                const type = (fieldNode.getAttribute('type') || 'text').toLowerCase();
                                const name = fieldNode.getAttribute('name') || '';
                                const placeholder = fieldNode.getAttribute('placeholder') || '';
                                let fieldEl;
                                if (type === 'textarea') {
                                    fieldEl = document.createElement('textarea');
                                } else {
                                    fieldEl = document.createElement('input');
                                    fieldEl.type = type;
                                }
                                fieldEl.name = name;
                                fieldEl.placeholder = placeholder;
                                fieldEl.className = getFieldClass(name, type);
                                fieldEl.required = true;
                                formEl.insertBefore(fieldEl, submitGroup);
                            });
                        }
                        const submitNode = formNode.querySelector('submit-button');
                        const submitButton = document.getElementById('form-submit');
                        if (submitNode && submitButton) {
                            submitButton.textContent = normalizeText(submitNode.textContent) || submitButton.textContent;
                            const styleVariant = submitNode.getAttribute('style');
                            if (styleVariant) {
                                submitButton.dataset.style = styleVariant;
                            } else {
                                delete submitButton.dataset.style;
                            }
                        }
                        if (errorsContainer) {
                            errorsContainer.innerHTML = '';
                            const validationGroup = formNode.querySelector('validation-messages');
                            if (validationGroup) {
                                validationGroup.querySelectorAll('message').forEach((messageNode) => {
                                    const forAttr = messageNode.getAttribute('for') || 'field';
                                    const messageEl = document.createElement('div');
                                    messageEl.className = `form-error__${slugify(forAttr) || 'item'}`;
                                    messageEl.textContent = normalizeText(messageNode.textContent);
                                    errorsContainer.appendChild(messageEl);
                                });
                            }
                        }
                    }
                }
            }

            function renderFooter(xmlDoc) {
                const backToTopNode = xmlDoc.querySelector('footer > back-to-top');
                const backToTopEl = document.getElementById('back-to-top');
                if (backToTopNode && backToTopEl) {
                    const target = backToTopNode.getAttribute('href') || '#hero';
                    backToTopEl.setAttribute('href', target);
                }
                const socialsContainer = document.getElementById('socials');
                const socialsNode = xmlDoc.querySelector('footer > socials');
                if (socialsContainer) {
                    socialsContainer.innerHTML = '';
                    if (socialsNode) {
                        socialsNode.querySelectorAll('social-link').forEach((linkNode) => {
                            const type = (linkNode.getAttribute('type') || 'link').toLowerCase();
                            const href = linkNode.getAttribute('href') || '#';
                            const anchor = document.createElement('a');
                            anchor.href = href;
                            anchor.target = '_blank';
                            anchor.rel = 'noreferrer noopener';
                            const assetAttr = linkNode.getAttribute('asset');
                            const modifier = slugify(type) || 'link';
                            const badge = document.createElement('div');
                            badge.className = `socials__${modifier}`;
                            const asset = assetAttr || (modifier ? `imgs/${modifier}.png` : '');
                            if (asset) {
                                const img = document.createElement('img');
                                img.src = asset;
                                img.alt = type || 'social link';
                                badge.appendChild(img);
                            } else {
                                badge.textContent = type ? type.toUpperCase() : 'LINK';
                            }
                            anchor.appendChild(badge);
                            socialsContainer.appendChild(anchor);
                        });
                    }
                }
                const footerCopyEl = document.getElementById('footer-copy');
                if (footerCopyEl) {
                    const highlight = xmlDoc.querySelector('hero highlight');
                    const name = highlight ? normalizeText(highlight.textContent) : 'Portfolio';
                    const year = new Date().getFullYear();
                    footerCopyEl.textContent = name.toUpperCase() + ' \u00A9 ' + year;
                }
            }

            function updateDocumentTitle(xmlDoc) {
                const highlight = xmlDoc.querySelector('hero highlight');
                if (!highlight) {
                    return;
                }
                const name = normalizeText(highlight.textContent);
                if (name) {
                    document.title = `${name} | Portfolio`;
                }
            }

            function setupScrollSpy(navItems) {
                if (scrollSpyHandler) {
                    window.removeEventListener('scroll', scrollSpyHandler);
                }
                if (scrollSpyResizeHandler) {
                    window.removeEventListener('resize', scrollSpyResizeHandler);
                }
                if (!navItems || navItems.length === 0) {
                    scrollSpyHandler = null;
                    scrollSpyResizeHandler = null;
                    return;
                }
                const sections = navItems
                    .map(({ targetId }) => {
                        if (!targetId) {
                            return null;
                        }
                        const id = targetId.replace(/^#/, '');
                        const section = document.getElementById(id);
                        return section ? { id, element: section } : null;
                    })
                    .filter(Boolean);
                if (sections.length === 0) {
                    scrollSpyHandler = null;
                    scrollSpyResizeHandler = null;
                    return;
                }
                scrollSpyHandler = () => {
                    const scrollPosition = window.scrollY + window.innerHeight * 0.3;
                    let activeId = sections[0].id;
                    sections.forEach(({ id, element }) => {
                        const rect = element.getBoundingClientRect();
                        const top = window.scrollY + rect.top;
                        if (scrollPosition >= top) {
                            activeId = id;
                        }
                    });
                    navItems.forEach(({ li, targetId }) => {
                        const itemId = (targetId || '').replace(/^#/, '');
                        if (itemId === activeId) {
                            li.classList.add('navigation__item--active');
                        } else {
                            li.classList.remove('navigation__item--active');
                        }
                    });
                };
                scrollSpyResizeHandler = () => {
                    if (scrollSpyHandler) {
                        scrollSpyHandler();
                    }
                };
                window.addEventListener('scroll', scrollSpyHandler, { passive: true });
                window.addEventListener('resize', scrollSpyResizeHandler);
                scrollSpyHandler();
            }

            function refreshScrollSpy() {
                if (scrollSpyHandler) {
                    scrollSpyHandler();
                }
            }

            function normalizeText(value) {
                return value ? value.replace(/\s+/g, ' ').trim() : '';
            }

            function slugify(value) {
                return value
                    ? value
                          .toLowerCase()
                          .replace(/[^a-z0-9]+/g, '-')
                          .replace(/(^-+|-+$)/g, '')
                    : '';
            }

            function getFieldClass(name, type) {
                const map = {
                    name: 'contact__form-name',
                    _replyto: 'contact__form-email',
                    message: 'contact__form-message'
                };
                if (map[name]) {
                    return map[name];
                }
                return type === 'textarea' ? 'contact__form-message' : 'contact__form-name';
            }
        </script>
    </body>
</html>
